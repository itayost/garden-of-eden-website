---
phase: 05-auth-enhancements
plan: 06
type: execute
wave: 4
depends_on: ["05-01", "05-05"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Forgot password flow sends email and allows reset"
    - "2FA can be enabled from security settings"
    - "2FA verification required during login when enabled"
    - "2FA can be disabled from security settings"
  artifacts: []
  key_links: []
---

<objective>
Human verification of complete auth enhancements functionality.

Purpose: Verify that password reset flow and 2FA features work end-to-end as a user would experience them.

Output: Verification of all auth enhancement features.
</objective>

<execution_context>
@/Users/itayostraich/.claude/get-shit-done/workflows/execute-plan.md
@/Users/itayostraich/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-auth-enhancements/05-01-SUMMARY.md
@.planning/phases/05-auth-enhancements/05-02-SUMMARY.md
@.planning/phases/05-auth-enhancements/05-03-SUMMARY.md
@.planning/phases/05-auth-enhancements/05-04-SUMMARY.md
@.planning/phases/05-auth-enhancements/05-05-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete auth enhancements including:
1. Password reset flow (forgot password + reset password pages)
2. 2FA enrollment (QR code setup in security settings)
3. 2FA verification during login
4. 2FA disabling
5. Forgot password link on login page
  </what-built>
  <how-to-verify>
**Prerequisites:**
- Have authenticator app ready (Google Authenticator, Authy, etc.)
- Have access to email for password reset testing

**Test 1: Forgot Password Flow**
1. Navigate to /auth/login
2. Verify "שכחתי סיסמה" link is visible
3. Click link, verify /auth/forgot-password page loads
4. Enter email, submit
5. Check email for reset link (may need to check spam)
6. Click link, verify /auth/reset-password page loads
7. Enter new password, verify requirements indicator works
8. Submit, verify redirect to dashboard

**Test 2: Enable 2FA**
1. Login to dashboard
2. Navigate to /dashboard/settings/security (via sidebar)
3. Verify page shows "2FA לא מופעל" status
4. Click "הפעל 2FA" button
5. Verify setup flow shows intro screen
6. Continue to QR code screen
7. Scan QR code with authenticator app
8. Enter 6-digit code from app
9. Verify success message and 2FA now shows as enabled

**Test 3: 2FA Login Verification**
1. Logout from dashboard
2. Login again with email/phone OTP
3. After OTP verification, verify redirect to /auth/verify-2fa
4. Enter code from authenticator app
5. Verify redirect to dashboard

**Test 4: Disable 2FA**
1. Navigate to /dashboard/settings/security
2. Verify 2FA shows as enabled
3. Click disable button
4. Verify confirmation dialog appears
5. Enter current TOTP code
6. Submit, verify 2FA now shows as disabled

**Test 5: Login Without 2FA**
1. Logout
2. Login again
3. After OTP verification, verify direct redirect to dashboard (no 2FA prompt)
  </how-to-verify>
  <resume-signal>Type "approved" if all tests pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Human verification of all auth enhancement features.
</verification>

<success_criteria>
- Password reset flow works end-to-end
- 2FA enrollment with QR code works
- 2FA required during login when enabled
- 2FA can be disabled with code confirmation
- All Hebrew text displays correctly
- All UI follows established patterns
</success_criteria>

<output>
After completion, create `.planning/phases/05-auth-enhancements/05-06-SUMMARY.md`
</output>
