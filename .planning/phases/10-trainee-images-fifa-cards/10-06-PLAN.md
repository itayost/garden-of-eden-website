---
phase: 10-trainee-images-fifa-cards
plan: 06
type: execute
wave: 5
depends_on: ["10-05"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Admin can upload a trainee photo from user edit page"
    - "Photo is processed with background removal"
    - "Trainee avatar displays uploaded photo throughout app"
    - "FIFA card displays cutout image with visible card background"
    - "Initials fallback works when no image uploaded"
---

<objective>
Human verification of complete trainee image management and FIFA card integration. Test the full flow from upload through display on player cards.

Purpose: Confirm all functionality works as expected before phase completion
Output: Verified working feature or identified issues for gap closure
</objective>

<execution_context>
@/Users/itayostraich/.claude/get-shit-done/workflows/execute-plan.md
@/Users/itayostraich/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-trainee-images-fifa-cards/10-CONTEXT.md
@.planning/phases/10-trainee-images-fifa-cards/10-05-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete trainee image management system with:
- RLS policies for admin/coach uploads
- Background removal via remove.bg API
- Multi-step upload flow (select -> preview -> process -> result)
- FIFA card cutout display with transparency
- Avatar display throughout app
  </what-built>
  <how-to-verify>
**Prerequisites:**
1. Ensure REMOVEBG_API_KEY is set in environment
2. Have a test trainee user account
3. Have a test photo (JPG or PNG, person portrait with background)

**Test 1: Upload Flow**
1. Log in as admin
2. Go to Admin > Users
3. Click on a trainee user to edit
4. Find the "Profile Photo" section in sidebar
5. Click "Add Photo" or "Change Photo"
6. Select a photo file (person portrait with background)
7. Verify: Preview shows selected image
8. Click "Confirm & Continue"
9. Verify: Processing spinner appears
10. Verify: After processing, cutout result displays (background removed)
11. Click "Save"
12. Verify: Toast shows success message
13. Verify: Avatar in section updates to show new photo

**Test 2: Avatar Consistency**
1. After upload, navigate around the app
2. Check: Trainee's avatar shows in user edit page
3. Check: Avatar appears consistently (same image everywhere)

**Test 3: FIFA Card Display**
1. Log in as the trainee user (or view their dashboard as admin)
2. Go to Dashboard (where FIFA card is shown)
3. Verify: FIFA card shows cutout image
4. Verify: Card gradient/background visible through transparent areas
5. Verify: Image is centered on card (not top-aligned)

**Test 4: Initials Fallback**
1. Find a user without uploaded photo
2. Check: Avatar shows initials
3. Check: FIFA card shows initials fallback

**Test 5: Error Handling**
1. Try uploading non-image file (should show error)
2. Try uploading very large image > 5MB (should show error)
3. If remove.bg is unavailable, verify graceful error message

**Pass/Fail:**
- All 5 tests pass: Type "approved"
- Issues found: Describe what failed and expected vs actual behavior
  </how-to-verify>
  <resume-signal>Type "approved" to complete phase, or describe issues found</resume-signal>
</task>

</tasks>

<verification>
Human verification of complete feature functionality.
</verification>

<success_criteria>
- [ ] Upload flow works end-to-end
- [ ] Background removal processes correctly
- [ ] Avatar displays throughout app
- [ ] FIFA card shows cutout with transparency
- [ ] Initials fallback works
- [ ] Error handling works for invalid files
</success_criteria>

<output>
After completion, create `.planning/phases/10-trainee-images-fifa-cards/10-06-SUMMARY.md`
</output>
